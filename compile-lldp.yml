---
# Tasks to compile lldp and associated dev files for 12.04
#
- name: create the tmp directory for lldp install
  file: path=/tmp/lldp state=directory
- name: create the deb directory for lldp install
  file: path=/home/skamithi/debs state=directory
- name: download lldp dsc file
  get_url: url=http://archive.ubuntu.com/ubuntu/pool/universe/l/lldpd/lldpd_0.7.6-1.dsc dest=/tmp/lldp
- name: get lldp source file
  get_url: url=http://archive.ubuntu.com/ubuntu/pool/universe/l/lldpd/lldpd_0.7.6.orig.tar.gz dest=/tmp/lldp
- name: get lldp debian source file
  get_url: url=http://archive.ubuntu.com/ubuntu/pool/universe/l/lldpd/lldpd_0.7.6-1.debian.tar.gz dest=/tmp/lldp
- name: download source code
  command: dpkg-source -x lldpd_0.7.6-1.dsc chdir=/tmp/lldp
- name: compile source code
  command: dpkg-buildpackage -rfakeroot -b chdir=/tmp/lldp/lldpd-0.7.6
- name: copy newly created lldplldpctl-dev into a $HOME/deb directory
  copy: src=/tmp/lldp/liblldpctl-dev_0.7.6-1_amd64.deb dest=/home/skamithi/debs/liblldpctl-dev_0.7.6-1_amd64.deb
- name: copy newly created lldp into a $HOME/deb directory
  copy: src=/tmp/lldp/lldpd_0.7.6-1_amd64.deb dest=/home/skamithi/debs/lldpd_0.7.6-1_amd64.deb
- name: delete tmp directory
  file: path=/tmp/lldp state=absent recurse=yes
